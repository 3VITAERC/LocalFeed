<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Picture Scroller</title>
    <link rel="stylesheet" href="/static/style.css">
    <!-- Preload JS modules to parallelize fetch and eliminate waterfall -->
    <link rel="modulepreload" href="/static/js/state.js">
    <link rel="modulepreload" href="/static/js/api.js">
    <link rel="modulepreload" href="/static/js/viewport.js">
    <link rel="modulepreload" href="/static/js/utils/path.js">
    <link rel="modulepreload" href="/static/js/utils/video.js">
    <link rel="modulepreload" href="/static/js/utils/gif.js">
    <style>
        /* Additional styles for optimized loading */
        .image-slide {
            background: #000;
        }
        .image-slide img {
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .image-slide img.loaded {
            opacity: 1;
        }
        .image-slide video.loaded {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Loading Overlay - visible by default, hidden when first image loads -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner-main">
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
        </div>
    </div>
    
    <!-- Right-side Action Bar (TikTok style) -->
    <div class="action-bar" id="actionBar">
        <!-- Heart/Favorite Button -->
        <button class="action-btn heart-action" id="heartBtn" title="Add to favorites">
            <svg class="heart-outline" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <svg class="heart-filled" viewBox="0 0 24 24" fill="#FF2D55" style="display: none;">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        </button>
        
        <!-- Trash/Mark for Deletion Button -->
        <button class="action-btn trash-action" id="trashBtn" title="Mark for deletion">
            <svg class="trash-outline" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
            <svg class="trash-filled" viewBox="0 0 24 24" fill="#FF3B30" stroke="#FF3B30" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <rect x="9" y="10" width="2" height="7" fill="#FF3B30"></rect>
                <rect x="13" y="10" width="2" height="7" fill="#FF3B30"></rect>
            </svg>
        </button>
        
        <!-- Favorites/Bookmarks Button -->
        <button class="action-btn" id="filterBtn" title="View favorites only">
            <svg class="filter-icon" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
            </svg>
            <span class="filter-badge" id="filterBadge" style="display: none;">0</span>
        </button>
        
        <!-- Shuffle Toggle Button -->
        <button class="action-btn" id="shuffleBtn" title="Toggle shuffle">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="16 3 21 3 21 8"></polyline>
                <line x1="4" y1="20" x2="21" y2="3"></line>
                <polyline points="21 16 21 21 16 21"></polyline>
                <line x1="15" y1="15" x2="21" y2="21"></line>
                <line x1="4" y1="4" x2="9" y2="9"></line>
            </svg>
        </button>
        
        <!-- Info Button -->
        <button class="action-btn info-btn" id="infoBtn" title="Image info">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        </button>
        
        <!-- Settings Button -->
        <button class="action-btn" id="settingsBtn" title="Settings">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
        </button>
    </div>
    
    <!-- TikTok-style Top Navigation -->
    <div class="top-nav" id="topNav">
        <!-- Filter/Sort Button -->
        <button class="top-nav-filter" id="topNavFilter" title="Sort options">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <circle cx="12" cy="5" r="2"></circle>
                <circle cx="12" cy="12" r="2"></circle>
                <circle cx="12" cy="19" r="2"></circle>
            </svg>
            <div class="top-nav-dropdown" id="topNavDropdown">
                <div class="dropdown-option active" data-sort="newest">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="17 11 12 6 7 11"></polyline>
                        <line x1="12" y1="18" x2="12" y2="6"></line>
                    </svg>
                    <span>New ‚Üí Old</span>
                </div>
                <div class="dropdown-option" data-sort="oldest">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="7 13 12 18 17 13"></polyline>
                        <line x1="12" y1="6" x2="12" y2="18"></line>
                    </svg>
                    <span>Old ‚Üí New</span>
                </div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-option" data-sort="jump">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="16"></line>
                        <line x1="8" y1="12" x2="16" y2="12"></line>
                    </svg>
                    <span>Go to Photo #</span>
                </div>
            </div>
        </button>
        
        <!-- Folder Tabs (horizontally scrollable) -->
        <div class="top-nav-tabs" id="topNavTabs">
            <!-- Tabs populated by JavaScript -->
        </div>
        
        <!-- Search Button -->
        <button class="top-nav-search" id="topNavSearch" title="Browse folders">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
        </button>
    </div>
    
    <!-- Auto-Advance Active Indicator -->
    <div class="auto-advance-indicator" id="autoAdvanceIndicator" style="display: none;" title="Auto-advance active - click to disable">
        <svg viewBox="0 0 24 24" fill="white">
            <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/>
        </svg>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast-notification" id="toastNotification" style="display: none;"></div>
    
    <!-- Jump to photo modal -->
    <div class="jump-modal" id="jumpModal" style="display: none;">
        <div class="jump-modal-content">
            <h3>Jump to Photo</h3>
            <div class="jump-input-group">
                <input type="number" id="jumpInput" min="1" placeholder="Enter photo #">
                <span class="jump-total">/ <span id="jumpTotal">0</span></span>
            </div>
            <div class="jump-buttons">
                <button class="jump-btn cancel" id="jumpCancel">Cancel</button>
                <button class="jump-btn go" id="jumpGo">Go</button>
            </div>
        </div>
    </div>
    
    <!-- Scroll container -->
    <div class="scroll-container" id="scrollContainer">
        <!-- Slides rendered here by JavaScript -->
    </div>
    
    <!-- No images state -->
    <div class="no-images" id="noImages" style="display: none;">
        <h2>No Images Found</h2>
        <p>Add some folders to get started</p>
        <button class="no-images-settings-btn" id="noImagesSettingsBtn">Go to Settings</button>
    </div>
    
    <!-- No favorites state -->
    <div class="no-images" id="noFavorites" style="display: none;">
        <h2 id="noFavoritesTitle">No Favorites Yet</h2>
        <p id="noFavoritesMessage">Double-tap photos to add them to your favorites</p>
        <button class="exit-filter-btn" id="exitFilterBtn">View All Photos</button>
    </div>
    
    <!-- No trash state -->
    <div class="no-images" id="noTrash" style="display: none;">
        <h2>Trash is Empty</h2>
        <p>Swipe left on photos to mark them for deletion</p>
        <button class="exit-filter-btn" id="exitTrashBtn">View All Photos</button>
    </div>
    
    <!-- Trash animation overlay -->
    <div class="trash-animation" id="trashAnimation">
        <svg viewBox="0 0 24 24" fill="none" stroke="#FF3B30" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
        </svg>
    </div>
    
    <!-- Info Modal -->
    <div class="info-modal" id="infoModal" style="display: none;">
        <div class="info-modal-content">
            <div class="info-modal-header">
                <h3>Image Info</h3>
                <button class="info-modal-close" id="infoModalClose">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="info-modal-body" id="infoModalBody">
                <!-- Metadata populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Folders Modal -->
    <div class="info-modal" id="foldersModal" style="display: none;">
        <div class="folders-modal-content">
            <div class="info-modal-header">
                <h3>Folders</h3>
                <button class="info-modal-close" id="foldersModalClose">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="folders-modal-body" id="foldersModalBody">
                <!-- Search and sort controls -->
                <div class="folders-controls">
                    <div class="folders-search-container">
                        <svg class="folders-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" class="folders-search-input" id="foldersSearchInput" placeholder="Search folders...">
                    </div>
                    <div class="folders-sort-container">
                        <select class="folders-sort-select" id="foldersSortSelect">
                            <option value="count">Most Images</option>
                            <option value="name">A-Z</option>
                            <option value="newest">Newest</option>
                        </select>
                    </div>
                </div>
                <!-- Folder list populated by JavaScript -->
                <div class="folders-list" id="foldersList">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="info-modal" id="settingsModal" style="display: none;">
        <div class="settings-modal-content">
            <div class="info-modal-header">
                <h3>Settings</h3>
                <button class="info-modal-close" id="settingsModalClose">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="settings-modal-body" id="settingsModalBody">
                <!-- Cache Settings Section (Collapsible) -->
                <div class="settings-cache-section">
                    <div class="settings-cache-header" id="cacheSettingsHeader">
                        <h4>Performance Settings - Experimental</h4>
                        <span class="settings-cache-arrow">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.6)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </span>
                    </div>
                    <div class="settings-cache-content" id="cacheSettingsContent" style="display: none;">
                    <p class="settings-cache-description">
                        Performance optimizations that create cached versions for faster loading.
                        <span class="ffmpeg-required">Requires FFMPEG</span>
                    </p>
                    
                    <!-- Thumbnail Cache Toggle -->
                    <div class="settings-cache-item">
                        <div class="settings-cache-info">
                            <div class="settings-cache-text">
                                <div class="settings-cache-title">Image Thumbnails</div>
                                <div class="settings-cache-desc">Resize images to screen size, convert to WebP</div>
                            </div>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggleThumbnailCache">
                            <span class="settings-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <!-- Video Poster Toggle -->
                    <div class="settings-cache-item">
                        <div class="settings-cache-info">
                            <div class="settings-cache-text">
                                <div class="settings-cache-title">Video Posters</div>
                                <div class="settings-cache-desc">Show instant preview while video loads</div>
                            </div>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggleVideoPoster">
                            <span class="settings-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <!-- Preload Distance -->
                    <div class="settings-cache-item">
                        <div class="settings-cache-info">
                            <div class="settings-cache-text">
                                <div class="settings-cache-title">Preload Distance</div>
                                <div class="settings-cache-desc">Slides to preload ahead: <span id="preloadDistanceValue">3</span></div>
                            </div>
                        </div>
                        <input type="range" id="preloadDistanceSlider" min="0" max="10" value="3" class="settings-slider">
                    </div>
                    
                    <!-- Clear Cache Button -->
                    <div class="settings-cache-actions">
                        <div class="settings-cache-info">
                            <div class="settings-cache-text">
                                <div class="settings-cache-title">Cache Size</div>
                                <div class="settings-cache-desc" id="cacheSizeDisplay">Calculating...</div>
                            </div>
                        </div>
                        <button class="settings-clear-cache-btn" id="clearCacheBtn">
                            Clear Cache
                        </button>
                    </div>
                    </div>
                </div>
                
                <!-- Display Settings Section -->
                <div class="settings-cache-section">
                    <div class="settings-cache-header" id="displaySettingsHeader">
                        <h4>Display</h4>
                        <span class="settings-cache-arrow">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.6)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </span>
                    </div>
                    <div class="settings-cache-content" id="displaySettingsContent" style="display: none;">
                    
                    <!-- Fill Screen Toggle -->
                    <div class="settings-cache-item">
                        <div class="settings-cache-info">
                            <div class="settings-cache-text">
                                <div class="settings-cache-title">Fill Screen</div>
                                <div class="settings-cache-desc">Crop images to fill screen - optimized for iPhone</div>
                            </div>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggleFillScreen">
                            <span class="settings-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <!-- Auto-Advance Toggle -->
                    <div class="settings-cache-item">
                        <div class="settings-cache-info">
                            <div class="settings-cache-text">
                                <div class="settings-cache-title">Auto-Advance</div>
                                <div class="settings-cache-desc">Auto-scroll when video ends or after delay for photos</div>
                            </div>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggleAutoAdvance">
                            <span class="settings-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <!-- Auto-Advance Delay -->
                    <div class="settings-cache-item" id="autoAdvanceDelayItem">
                        <div class="settings-cache-info">
                            <div class="settings-cache-text">
                                <div class="settings-cache-title">Photo Delay</div>
                                <div class="settings-cache-desc">Seconds before auto-advancing: <span id="autoAdvanceDelayValue">3</span>s</div>
                            </div>
                        </div>
                        <input type="range" id="autoAdvanceDelaySlider" min="1" max="10" value="3" class="settings-slider">
                    </div>
                    
                    </div>
                </div>
                
                <!-- Add folder form -->
                <div class="settings-folder-section settings-add-folder-section">
                    <h4>Add Folder</h4>
                    <form class="settings-add-folder-form" id="settingsAddFolderForm">
                        <input
                            type="text"
                            id="settingsFolderPath"
                            placeholder="Enter folder path (e.g., ~/Pictures/July)"
                            autocapitalize="off"
                            autocorrect="off"
                        >
                        <button type="submit">Add</button>
                    </form>
                </div>
                
                <!-- Message area -->
                <div id="settingsMessage" class="settings-message" style="display: none;"></div>
                
                <!-- Stats -->
                <div class="settings-stats">
                    <div class="settings-stat-card">
                        <div class="settings-stat-number" id="settingsFolderCount">0</div>
                        <div class="settings-stat-label">Folders</div>
                    </div>
                    <div class="settings-stat-card">
                        <div class="settings-stat-number" id="settingsImageCount">0</div>
                        <div class="settings-stat-label">Images</div>
                    </div>
                </div>
                
                <!-- Trash section -->
                <div class="settings-trash-section">
                    <button class="settings-trash-btn" id="settingsTrashBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        <span>Review Trash</span>
                        <span class="trash-badge" id="settingsTrashBadge" style="display: none;">0</span>
                    </button>
                </div>
                
                <!-- Logout section (only shown when auth is enabled) -->
                <div class="settings-logout-section" id="settingsLogoutSection" style="display: none;">
                    <button class="settings-logout-btn" id="settingsLogoutBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        <span>Log Out</span>
                    </button>
                </div>
                
                <!-- Folder list -->
                <div class="settings-folder-section settings-folder-list-section">
                    <h4>Folders</h4>
                    <div id="settingsFolderList">
                        <div class="settings-empty-state">
                            <p>No folders added yet</p>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    
    <!-- Trash Modal -->
    <div class="info-modal" id="trashModal" style="display: none;">
        <div class="trash-modal-content">
            <div class="info-modal-header">
                <h3>üóëÔ∏è Trash</h3>
                <button class="info-modal-close" id="trashModalClose">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="trash-modal-body" id="trashModalBody">
                <div class="trash-info">
                    <p>Photos marked for deletion will appear here. You can review them before permanently deleting.</p>
                    <div class="trash-count-info">
                        <span id="trashCountInfo">0 photos marked for deletion</span>
                    </div>
                </div>
                <div class="trash-actions">
                    <button class="trash-action-btn view-trash-btn" id="viewTrashBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Review Trash
                    </button>
                    <button class="trash-action-btn empty-trash-btn" id="emptyTrashBtn" disabled>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6"></path>
                        </svg>
                        Empty Trash
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="delete-confirm-modal" id="deleteConfirmModal" style="display: none;">
        <div class="delete-confirm-content">
            <div class="delete-confirm-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="#FF3B30" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
            </div>
            <h3>Delete Photos Permanently?</h3>
            <p id="deleteConfirmMessage">This will permanently delete 0 photos from your device. This action cannot be undone.</p>
            <div class="delete-confirm-buttons">
                <button class="delete-confirm-btn cancel" id="deleteCancelBtn">Cancel</button>
                <button class="delete-confirm-btn delete" id="deleteConfirmBtn">Delete</button>
            </div>
        </div>
    </div>
    
    <!-- Keyboard Shortcuts Modal -->
    <div class="info-modal" id="shortcutsModal" style="display: none;">
        <div class="shortcuts-modal-content">
            <div class="info-modal-header">
                <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
                <button class="info-modal-close" id="shortcutsModalClose">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="shortcuts-modal-body">
                <div class="shortcuts-section">
                    <h4>Navigation</h4>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">J</span>
                            <span class="key-separator">or</span>
                            <span class="key">‚Üì</span>
                        </div>
                        <div class="shortcut-desc">Scroll down one image</div>
                    </div>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">K</span>
                            <span class="key-separator">or</span>
                            <span class="key">‚Üë</span>
                        </div>
                        <div class="shortcut-desc">Scroll up one image</div>
                    </div>
                </div>
                <div class="shortcuts-section">
                    <h4>Actions</h4>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">L</span>
                            <span class="key-separator">or</span>
                            <span class="key">‚Üí</span>
                        </div>
                        <div class="shortcut-desc">Like image</div>
                    </div>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">H</span>
                            <span class="key-separator">or</span>
                            <span class="key">‚Üê</span>
                        </div>
                        <div class="shortcut-desc">Mark for deletion</div>
                    </div>
                </div>
                <div class="shortcuts-section">
                    <h4>Views</h4>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">F</span>
                        </div>
                        <div class="shortcut-desc">Favorites</div>
                    </div>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">D</span>
                        </div>
                        <div class="shortcut-desc">Marked for Deletion folder</div>
                    </div>
                </div>
                <div class="shortcuts-section">
                    <h4>Video</h4>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">M</span>
                        </div>
                        <div class="shortcut-desc">Mute/Unmute video</div>
                    </div>
                </div>
                <div class="shortcuts-section">
                    <h4>Modals</h4>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">I</span>
                        </div>
                        <div class="shortcut-desc">Toggle Info modal</div>
                    </div>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">S</span>
                        </div>
                        <div class="shortcut-desc">Toggle Settings modal</div>
                    </div>
                    <div class="shortcut-row">
                        <div class="shortcut-keys">
                            <span class="key">?</span>
                        </div>
                        <div class="shortcut-desc">Show this help</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- File path display at bottom left -->
    <div class="file-path-display" id="filePathDisplay"></div>
    
    <!-- Load the modular JavaScript application -->
    <script type="module" src="/static/js/app.js"></script>
</body>
</html>
